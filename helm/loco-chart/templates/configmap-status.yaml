apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "loco.fullname" . }}-status
  namespace: {{ include "loco.namespace" . }}
  labels:
    app.kubernetes.io/component: config
    app.kubernetes.io/part-of: lego-loco-cluster
    app.kubernetes.io/name: lego-loco-config
data:
  status.json: |
    {
    {{- $replicas := int .Values.replicas }}
    {{- range $i := until $replicas }}
      "instance-{{ $i }}": "booting"{{ if lt (add1 $i) $replicas }},{{ end }}
    {{- end }}
    }
